<div class="select is-fullwidth">
  <select name="file"
          hx-get="{% url 'puzzlehunt:staff:file_editor_load_content' %}"
          hx-target="#editor-outer-container"
          hx-trigger="change">
    <option value="">-- Select a file --</option>
    {% for entry in file_entries %}
    <option value="{{ entry.file_type }}:{{ entry.file.pk }}"
            {% if selected_file_pk == entry.file.pk and selected_file_type == entry.file_type %}selected{% endif %}>
      {% if entry.file_type == "solution" %}[S] {% endif %}{{ entry.file.relative_name }}
    </option>
    {% endfor %}
    {% if not file_entries %}
    <option value="" disabled>No editable files found</option>
    {% endif %}
  </select>
</div>
{% if not initial_render %}
  {% if auto_select_entry %}
  <script>
    (function() {
      const select = document.querySelector('#file-select-container select');
      htmx.process(select);
      select.value = '{{ auto_select_entry.file_type }}:{{ auto_select_entry.file.pk }}';
      htmx.trigger(select, 'change');
    })();
  </script>
  {% else %}
  <div id="editor-outer-container" hx-swap-oob="true">
    {% include "partials/_file_editor_content.html" with file=None %}
  </div>
  {% endif %}
{% endif %}
